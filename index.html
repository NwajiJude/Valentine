<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Be My Valentine üíñ</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<style>
:root{
  --pink:#ff4f8b;
  --pink2:#ff8fc7;
  --bg1:#fff0f7;
  --bg2:#ffd1e6;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100svh;
  display:grid;
  place-items:center;
  background:radial-gradient(circle at top,var(--bg1),var(--bg2));
  font-family:system-ui,sans-serif;
  overflow:hidden;
}

#confettiCanvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:99;
}

.heart{
  position:fixed;
  font-size:24px;
  animation:float 10s linear infinite;
  opacity:.7;
}

@keyframes float{
  from{transform:translateY(110vh) scale(.6);}
  to{transform:translateY(-10vh) scale(1.3);}
}

.card{
  width:min(720px,92vw);
  padding:34px 28px;
  background:rgba(255,255,255,.7);
  backdrop-filter:blur(14px);
  border-radius:28px;
  text-align:center;
  box-shadow:0 30px 80px rgba(0,0,0,.15);
  animation:popIn .7s ease;
}

@keyframes popIn{
  from{transform:translateY(30px) scale(.95);opacity:0}
  to{transform:none;opacity:1}
}

h1{
  font-size:clamp(26px,4vw,46px);
  background:linear-gradient(45deg,var(--pink),var(--pink2));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  margin:16px 0 20px;
  text-shadow:0 6px 20px rgba(255,79,139,.3);
}

input{
  padding:14px 18px;
  border-radius:999px;
  border:1px solid #ffc0d9;
  outline:none;
  font-size:16px;
  margin-bottom:18px;
  width:70%;
  text-align:center;
}

.button-zone{
  position:relative;
  width:min(520px,92%);
  height:150px;
  margin:0 auto;
}

button{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  padding:16px 28px;
  font-size:18px;
  font-weight:700;
  border-radius:999px;
  border:none;
  cursor:pointer;
  box-shadow:0 14px 30px rgba(0,0,0,.18);
  transition:.15s ease;
}

#yesBtn{
  left:18%;
  background:linear-gradient(45deg,#ff4f8b,#ff7bb8);
  color:white;
}

#yesBtn:hover{transform:translateY(-50%) scale(1.1)}

#noBtn{
  left:62%;
  background:#fff;
  color:#ff4f8b;
}

.hint{margin-top:10px;font-size:14px;opacity:.75;}

.result{display:none;margin-top:20px;animation:pop .4s ease;}

@keyframes pop{from{transform:scale(.9);opacity:0}to{transform:none;opacity:1}}
</style>
</head>

<body>
<canvas id="confettiCanvas"></canvas>

<main class="card">
  <input id="nameInput" placeholder="Enter your name üíå">

  <h1 id="question">Will you be my Valentine? üíñ</h1>

  <section class="button-zone" id="zone">
    <button id="yesBtn">Yes üíò</button>
    <button id="noBtn">No üôà</button>
  </section>

  <div class="hint" id="hint">No seems a little shy‚Ä¶ üòè</div>

  <section class="result" id="result">
    <h2>YAY!!! üéâüíû</h2>
    <img src="https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif" width="260" alt="Celebration">
  </section>
</main>

<audio id="music" src="https://cdn.pixabay.com/audio/2022/03/15/audio_13c3c93993.mp3"></audio>

<script>
const zone = document.getElementById("zone");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const result = document.getElementById("result");
const hint = document.getElementById("hint");
const nameInput = document.getElementById("nameInput");
const question = document.getElementById("question");
const music = document.getElementById("music");

nameInput.addEventListener("input", () => {
  question.textContent = `${nameInput.value || "You"}, will you be my Valentine? üíñ`;
});

const confettiCanvas = document.getElementById("confettiCanvas");

function resizeConfetti(){
  const dpr = Math.max(1, window.devicePixelRatio || 1);
  confettiCanvas.width = window.innerWidth * dpr;
  confettiCanvas.height = window.innerHeight * dpr;
}
resizeConfetti();
window.addEventListener("resize", resizeConfetti);

const confettiInstance = confetti.create(confettiCanvas, { resize:false, useWorker:true });

function blast(){
  const end = Date.now() + 1600;
  (function frame(){
    confettiInstance({
      particleCount:10,
      spread:100,
      origin:{ x:Math.random(), y:Math.random()*0.3 }
    });
    if(Date.now() < end) requestAnimationFrame(frame);
  })();
}

let scale = 1;
function growYes(){
  scale = Math.min(2.3, scale + 0.12);
  yesBtn.style.transform = `translateY(-50%) scale(${scale})`;
}

function clamp(n,min,max){ return Math.max(min, Math.min(max,n)); }

function moveNo(px,py){
  const z = zone.getBoundingClientRect();
  const b = noBtn.getBoundingClientRect();
  let dx = (b.left + b.width/2) - px;
  let dy = (b.top + b.height/2) - py;
  let mag = Math.hypot(dx,dy) || 1;
  dx /= mag; dy /= mag;

  let nl = (b.left - z.left) + dx * 150;
  let nt = (b.top - z.top) + dy * 150;

  noBtn.style.left = clamp(nl, 0, z.width - b.width) + "px";
  noBtn.style.top  = clamp(nt, 0, z.height - b.height) + "px";

  growYes();
}

zone.addEventListener("pointermove", e => {
  const b = noBtn.getBoundingClientRect();
  const d = Math.hypot(
    (b.left + b.width/2) - e.clientX,
    (b.top  + b.height/2) - e.clientY
  );
  if(d < 140) moveNo(e.clientX, e.clientY);
});

yesBtn.addEventListener("click", () => {
  zone.style.display = "none";
  hint.style.display = "none";
  result.style.display = "block";
  music.play();
  blast();
});

// Floating hearts
setInterval(() => {
  const h = document.createElement("div");
  h.className = "heart";
  h.textContent = "üíñ";
  h.style.left = Math.random() * 100 + "vw";
  h.style.animationDuration = (6 + Math.random() * 6) + "s";
  h.style.fontSize = (16 + Math.random() * 28) + "px";
  document.body.appendChild(h);
  setTimeout(() => h.remove(), 12000);
}, 600);
</script>
</body>
</html>
